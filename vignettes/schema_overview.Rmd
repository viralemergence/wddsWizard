---
title: "Schema Overview"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Schema Overview}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This document provides background information about json-schemas in general and
more information about the structure of the Wildlife Disease Data standard. 

## Background

### Why do we need a data standard?

Data standards facilitate the sharing, reuse, and aggregation of data by
humans and machines through the use of a common structure and vocabulary. When
a dataset meets a data standard, it can be combined with other data sets that 
meet that standard. As the number of data sets that use the standard grows,
the questions that researchers can ask of the data changes. For example, if we have
data sets describing disease incidence for some pathogen from thousands of 
locations across multiple regions, we can explore general modeling frameworks for
that pathogen. Being able to reuse and aggregate data sets is especially 
important in fields like disease ecology where studies are time, resource, and 
labor intensive. 

### What is a JSON-schema

A JSON-schema is a human and machine readable document that
prescribes the structure, constraints, and content of a data set that meets a particular standard.
By constraints and contents, we mean rules around the type of data used in  particular field
(character, numeric, logical, etc), and its values (e.g. `massUnits` must be one 
of kg, mg, or g; `latitude` must be between -90 and 90; `sampleID` must be unique). 

Schema properties may themselves be schema. For example, the `data` property in this
standard defines a `data` object that is a flat table with constraints, types, and/or
requirements. In this way, JSON-schema allows for the construction of modular 
schema documents. 

Once we have created a schema, we can then validate data against it. The validation
process happens via a validation engine and tells us if the data conform
to the standard. If the data do not conform, then the validation engine tells
us precisely where the data are non-conformant and what the data standard expected
to see. 

![](https://json-schema.org/img/json_schema.svg){width=95%}

For more detailed information see [JSON-Schema.org](https://json-schema.org/overview/what-is-jsonschema)

## How do I use it?

### Data
#### Starting from scratch

Use our CSV templates and the data standard as a guide for storing data. Make sure
that at least the minimum required fields are captured in data collection,
and that they match the data standard. Lab and field data may not immediately
come out in a "tidy" format but as long as all properties are captured it 
should be possible to reshape the data to be compatible with the standard.

#### Starting from an existing project

This is more challenging than starting from scratch and requires harmonization 
your data and the data standard. Once you have crosswalked the fields from your
data onto the standard, you can start to reshape it into a single, tidy, table.
This package has vignettes describing how to move from CSV/excel to JSON for
[project metadata](project_metadata.html) and [wildlife disease data](disease_data.html).


## Wildlife Disease Data Standard (WDDS) Structure

The Wildlife Disease Data Standard is composed of two sub-schemas (1) `data` and
(2) `project_metadata`. 

`data` describes the structure and contents of the wildlife disease data. 
It has certain required fields and is extensible. This data should be stored as
[tidy](https://doi.org/10.18637/jss.v059.i10) dataset in a flat file like a CSV.
This component of the standard relies heavily on the Darwin Core data standard.

`project_metadata` describes the structure and contents of the descriptive 
metadata. That is, metadata about the project that enables discovery, 
identification, and attribution. This component of the standard relies heavily
on the Data Cite Metadata Schema.

Researchers may validate their data against each sub-schema separately, or
use them in tandem to validate an entire data package. The term "data package" 
refers to a list or JSON object that contains both the `data` and 
`project_metadata` components.


### Schema terms

```{r terms, results="asis"}
library(wddsWizard)
create_schema_docs() 
```

## Other packages of interest
- deposits
- jsonvalidate

