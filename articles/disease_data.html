<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Wildlife Disease Data • wddsWizard</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Wildlife Disease Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wddsWizard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/disease_data.html">Wildlife Disease Data</a></li>
    <li><a class="dropdown-item" href="../articles/project_metadata.html">Project Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/whole_game.html">The Whole Game</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="disease_data_files/kePrint-0.0.1/kePrint.js"></script><link href="disease_data_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Wildlife Disease Data</h1>
            
      

      <div class="d-none name"><code>disease_data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://viralemergence.github.io/wddsWizard/">wddsWizard</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor" class="external-link">janitor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette describes how to prepare data for validation against
the wildlife disease data standard. We will 1) read an exampl excel
spreadsheet, 2) do some light reformatting, and 3) produce a json
object.</p>
<div class="section level2">
<h2 id="required-fields">Required fields<a class="anchor" aria-label="anchor" href="#required-fields"></a>
</h2>
<p>The following fields are required to be in the data.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
Field
</th>
<th style="text-align:left;">
Descriptions
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
sampleID
</td>
<td style="text-align:left;">
A researcher-generated unique ID for the sample: usually a unique string
of both characters and integers (e.g., OS BZ19-114 to indicate an oral
swab taken from animal BZ19-114; see worked example below), to avoid
conflicts that can arise when datasets are merged with number-only
notation for samples. Ideally, sample names should be kept consistent
across all online databases and physical resources (e.g., museum
collections or project-specific sample archives).
</td>
</tr>
<tr>
<td style="text-align:left;">
animalID
</td>
<td style="text-align:left;">
A researcher-generated unique ID for the individual animal from which
the sample was collected: usually a unique string of both characters and
integers (e.g., BZ19-114 to indicate animal 114 sampled in 2019 in
Belize). Ideally, animal names should again be kept consistent across
online databases and physical resources.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/decimalLatitude" style="     " class="external-link">latitude</a>
</td>
<td style="text-align:left;">
Latitude of the collection site in decimal format.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/decimalLongitude" style="     " class="external-link">longitude</a>
</td>
<td style="text-align:left;">
Longitude of the collection site in decimal format.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/day" style="     " class="external-link">collectionDay</a>
</td>
<td style="text-align:left;">
The day of the month on which the specimen was collected.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/month" style="     " class="external-link">collectionMonth</a>
</td>
<td style="text-align:left;">
The month in which the specimen was collected.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/year" style="     " class="external-link">collectionYear</a>
</td>
<td style="text-align:left;">
The year in which the specimen was collected.
</td>
</tr>
<tr>
<td style="text-align:left;">
collectionMethodAndOrTissue
</td>
<td style="text-align:left;">
The technique used to acquire the sample and/or the tissue from which
the sample was extracted (e.g., oropharyngeal swab)
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/scientificName" style="     " class="external-link">hostIdentification</a>
</td>
<td style="text-align:left;">
The Linnaean classification of the animal from which the sample was
collected, reported at the lowest possible level (ideally, species
binomial name: e.g., Odocoileus virginianus or Ixodes scapularis). As
necessary, researchers may also include an additional field indicating
when uncertainty exists in the identification of the host organism (see
Adding new fields).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/associatedOccurrences" style="     " class="external-link">detectionTarget</a>
</td>
<td style="text-align:left;">
The taxonomic identity of the parasite being screened for in the sample.
This will often be coarser than the identity of a specific parasite
identified in the sample: for example, in a study screening for novel
bat coronaviruses, the entire family Coronaviridae might be the target;
in a parasite dissection, the targets might be Acanthocephala, Cestoda,
Nematoda, and Trematoda. For deep sequencing approaches (e.g.,
metagenomic and metatranscriptomic viral discovery), researchers should
report each alignment target used as a new test to maximize reporting of
negative data, or alternatively, select a subset that reflect specific
study objectives and the focus of analysis (e.g., specific viral
families).
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionMethod
</td>
<td style="text-align:left;">
The type of test performed to detect the parasite or parasite-specific
antibody (e.g., ‘qPCR’, ‘ELISA’)
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="http://rs.tdwg.org/dwc/terms/occurrenceStatus" style="     " class="external-link">detectionOutcome</a>
</td>
<td style="text-align:left;">
The test result (i.e., positive, negative, or inconclusive). To avoid
ambiguity, these specific values are suggested over numeric values (0 or
1).
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteIdentification
</td>
<td style="text-align:left;">
The identity of a parasite detected by the test, if any, reported to the
lowest possible taxonomic level, either as a Linnaean binomial
classification or within the convention of a relevant taxonomic
authority (e.g., Borrelia burgdorferi or Zika virus). Parasite
identification may be more specific than detection target.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="read-in-and-clean-up-the-excel-spreadsheet">Read in and Clean up the excel spreadsheet<a class="anchor" aria-label="anchor" href="#read-in-and-clean-up-the-excel-spreadsheet"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## read </span></span>
<span><span class="va">becker_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/extdata/example_data/Becker_demo_dataset.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">becker_data_prelim</span> <span class="op">&lt;-</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="va">becker_data</span>,case <span class="op">=</span> <span class="st">"lower_camel"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="check-for-required-fields">Check for required Fields<a class="anchor" aria-label="anchor" href="#check-for-required-fields"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># check that required fields are in dataset</span></span>
<span><span class="va">required_field_check</span> <span class="op">&lt;-</span> <span class="fu">wddsWizard</span><span class="fu">::</span><span class="va"><a href="../reference/data_required_fields.html">data_required_fields</a></span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">becker_data_prelim</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wddsWizard</span><span class="fu">::</span><span class="va"><a href="../reference/data_required_fields.html">data_required_fields</a></span><span class="op">[</span><span class="op">!</span><span class="va">required_field_check</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "sampleID"                    "animalID"                   </span></span>
<span><span class="co">#&gt; [3] "collectionMethodAndOrTissue"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="rename-fields-to-match-standard">Rename Fields to match standard<a class="anchor" aria-label="anchor" href="#rename-fields-to-match-standard"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">becker_data_prelim</span><span class="op">$</span><span class="va">collectionMethod</span></span>
<span><span class="co">#&gt; [1] "Oral swab"   "Rectal swab"</span></span>
<span></span>
<span><span class="va">becker_data_clean</span> <span class="op">&lt;-</span> <span class="va">becker_data_prelim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    <span class="st">"sampleID"</span> <span class="op">=</span> <span class="st">"sampleId"</span>,</span>
<span>    <span class="st">"animalID"</span> <span class="op">=</span> <span class="st">"animalId"</span>,</span>
<span>    <span class="st">"collectionMethodAndOrTissue"</span> <span class="op">=</span> <span class="st">"collectionMethod"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># check that all required fields are in the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu">wddsWizard</span><span class="fu">::</span><span class="va"><a href="../reference/data_required_fields.html">data_required_fields</a></span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">becker_data_clean</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="prep-for-json">Prep for JSON<a class="anchor" aria-label="anchor" href="#prep-for-json"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">becker_prepped</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_data.html">prep_data</a></span><span class="op">(</span><span class="va">becker_data_clean</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## wrap the prepped data in list</span></span>
<span><span class="va">becker_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">becker_prepped</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">becker_data</span>,pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "data": {</span></span>
<span><span class="co">#&gt;     "sampleID": ["OS BZ19-95", "RS BZ19-95"],</span></span>
<span><span class="co">#&gt;     "animalID": ["BZ19-114", "BZ19-114"],</span></span>
<span><span class="co">#&gt;     "latitude": [17.7643, 17.7643],</span></span>
<span><span class="co">#&gt;     "longitude": [-88.6521, -88.6521],</span></span>
<span><span class="co">#&gt;     "collectionDay": [23, 23],</span></span>
<span><span class="co">#&gt;     "collectionMonth": [4, 4],</span></span>
<span><span class="co">#&gt;     "collectionYear": [2019, 2019],</span></span>
<span><span class="co">#&gt;     "collectionMethodAndOrTissue": ["Oral swab", "Rectal swab"],</span></span>
<span><span class="co">#&gt;     "hostIdentification": ["Desmodus rotundus", "Desmodus rotundus"],</span></span>
<span><span class="co">#&gt;     "organismSex": ["male", "male"],</span></span>
<span><span class="co">#&gt;     "deadOrAlive": ["alive", "alive"],</span></span>
<span><span class="co">#&gt;     "hostLifeStage": ["subadult", "subadult"],</span></span>
<span><span class="co">#&gt;     "mass": [0.023, 0.023],</span></span>
<span><span class="co">#&gt;     "massUnits": ["kg", "kg"],</span></span>
<span><span class="co">#&gt;     "detectionTarget": ["Coronaviridae", "Coronaviridae"],</span></span>
<span><span class="co">#&gt;     "detectionMethod": ["semi-nested PCR", "semi-nested PCR"],</span></span>
<span><span class="co">#&gt;     "primerSequence": ["RdRp", "RdRp"],</span></span>
<span><span class="co">#&gt;     "primerCitation": ["doi:10.3390/v9120364", "doi:10.3390/v9120364"],</span></span>
<span><span class="co">#&gt;     "detectionOutcome": ["positive", "negative"],</span></span>
<span><span class="co">#&gt;     "parasiteIdentification": ["Alphacoronavirus", null],</span></span>
<span><span class="co">#&gt;     "genBankAccession": ["OM240578", null]</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Collin Schwantes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
