<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>WDDS to Pharos • wddsWizard</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="WDDS to Pharos">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wddsWizard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/wddsWizard.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/disease_data.html">Wildlife Disease Data</a></li>
    <li><a class="dropdown-item" href="../articles/extending_wdds.html">Extending the Wildlife Disease Data Standard</a></li>
    <li><a class="dropdown-item" href="../articles/project_metadata.html">Project Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/schema_overview.html">Schema Overview</a></li>
    <li><a class="dropdown-item" href="../articles/wdds_to_pharos.html">WDDS to Pharos</a></li>
    <li><a class="dropdown-item" href="../articles/wdds_to_zenodo.html">WDDS to Zenodo</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/viralemergence/wddsWizard/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="wdds_to_pharos_files/kePrint-0.0.1/kePrint.js"></script><link href="wdds_to_pharos_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>WDDS to Pharos</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/viralemergence/wddsWizard/blob/v0.2.0/vignettes/wdds_to_pharos.Rmd" class="external-link"><code>vignettes/wdds_to_pharos.Rmd</code></a></small>
      <div class="d-none name"><code>wdds_to_pharos.Rmd</code></div>
    </div>

    
    
<p>The Wildlife Disease Data Standard (WDDS) was originally conceived as
being the data standard for <a href="https://pharos.viralemergence.org/" class="external-link">Pharos</a> - a data
aggregation platform for wildlife disease data. However, the standard
has evolved faster than the platform and as of September 2025, the two
are out of sync.</p>
<p>This vignette will focus on converting disease data from the WDDS
standard to be compatible with Pharos. As September 2025, Pharos does
not have an API that is programatically accessible for users. To upload
disease data, users must <a href="https://pharos.viralemergence.org/app/#/login/" class="external-link">log in</a> or <a href="https://pharos.viralemergence.org/app/#/sign-up/" class="external-link">sign up</a>,
create a project, and either manually enter the data or use the CSV
upload function to bulk upload data.</p>
<p>See the <code><a href="../articles/disease_data.html">vignette("disease_data")</a></code> for more information on
validation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://viralemergence.github.io/wddsWizard/">wddsWizard</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor" class="external-link">janitor</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'janitor'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     chisq.test, fisher.test</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/taxize/" class="external-link">taxize</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="read-in-and-clean-up-the-excel-spreadsheet">Read in and Clean up the excel spreadsheet<a class="anchor" aria-label="anchor" href="#read-in-and-clean-up-the-excel-spreadsheet"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## read</span></span>
<span><span class="va">becker_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wdds_example_data.html">wdds_example_data</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"latest"</span>, file <span class="op">=</span> <span class="st">"becker_demo_dataset.csv"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">2</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">22</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (15): Sample ID, Animal ID, Sample collection method, Sample collection ...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (6): Latitude, Longitude, Collection day, Collection month, Collection ...</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">lgl</span>  (1): Live capture</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span></span>
<span><span class="va">becker_data_prelim</span> <span class="op">&lt;-</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="va">becker_data</span>, case <span class="op">=</span> <span class="st">"lower_camel"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Check for required Fields</span></span>
<span></span>
<span><span class="co"># check that required fields are in dataset</span></span>
<span><span class="va">required_field_check</span> <span class="op">&lt;-</span> <span class="fu">wddsWizard</span><span class="fu">::</span><span class="va"><a href="../reference/disease_data_required_fields.html">disease_data_required_fields</a></span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">becker_data_prelim</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wddsWizard</span><span class="fu">::</span><span class="va"><a href="../reference/disease_data_required_fields.html">disease_data_required_fields</a></span><span class="op">[</span><span class="op">!</span><span class="va">required_field_check</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "sampleID"</span></span>
<span></span>
<span><span class="co">### Rename Fields to match standard</span></span>
<span></span>
<span><span class="co"># see all field names in the disease data schema</span></span>
<span><span class="co"># wddsWizard::disease_data_schema$properties |&gt; names()</span></span>
<span></span>
<span><span class="va">becker_data_clean</span> <span class="op">&lt;-</span> <span class="va">becker_data_prelim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    <span class="st">"sampleID"</span> <span class="op">=</span> <span class="st">"sampleId"</span>,</span>
<span>    <span class="st">"animalID"</span> <span class="op">=</span> <span class="st">"animalId"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="differences-in-required-fields">Differences in required fields<a class="anchor" aria-label="anchor" href="#differences-in-required-fields"></a>
</h2>
<p>Unlike WDDS, the Pharos data standard requires
<code>Collection month</code>, <code>Collection day</code>, and
<code>Collection year</code> to be present and not blank for all records
in a dataset. See the <a href="https://pharos.viralemergence.org/guide-for-users/data-dictionary/" class="external-link">Pharos
data dictionary</a> for more details.</p>
</div>
<div class="section level2">
<h2 id="converting-wdds-data-to-pharos-data">Converting WDDS Data to Pharos Data<a class="anchor" aria-label="anchor" href="#converting-wdds-data-to-pharos-data"></a>
</h2>
<p>The WDDS to Pharos conversion happens by cross walking the two data
standards.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
wdds
</th>
<th style="text-align:left;">
pharos
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
age
</td>
<td style="text-align:left;">
Age
</td>
</tr>
<tr>
<td style="text-align:left;">
ageUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
animalID
</td>
<td style="text-align:left;">
Animal ID
</td>
</tr>
<tr>
<td style="text-align:left;">
collectionDay
</td>
<td style="text-align:left;">
Collection day
</td>
</tr>
<tr>
<td style="text-align:left;">
collectionMonth
</td>
<td style="text-align:left;">
Collection month
</td>
</tr>
<tr>
<td style="text-align:left;">
collectionYear
</td>
<td style="text-align:left;">
Collection year
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionMeasurement
</td>
<td style="text-align:left;">
Detection measurement
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionMeasurementUnits
</td>
<td style="text-align:left;">
Detection measurement units
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionMethod
</td>
<td style="text-align:left;">
Detection method
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionOutcome
</td>
<td style="text-align:left;">
Detection outcome
</td>
</tr>
<tr>
<td style="text-align:left;">
detectionTarget
</td>
<td style="text-align:left;">
Detection target
</td>
</tr>
<tr>
<td style="text-align:left;">
forwardPrimerSequence
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
genbankAccession
</td>
<td style="text-align:left;">
GenBank accession
</td>
</tr>
<tr>
<td style="text-align:left;">
geneTarget
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
hostIdentification
</td>
<td style="text-align:left;">
Host species
</td>
</tr>
<tr>
<td style="text-align:left;">
hostLifeStage
</td>
<td style="text-align:left;">
Life stage
</td>
</tr>
<tr>
<td style="text-align:left;">
latitude
</td>
<td style="text-align:left;">
Latitude
</td>
</tr>
<tr>
<td style="text-align:left;">
length
</td>
<td style="text-align:left;">
Length
</td>
</tr>
<tr>
<td style="text-align:left;">
lengthMeasurement
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
lengthUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
liveCapture
</td>
<td style="text-align:left;">
Dead or alive
</td>
</tr>
<tr>
<td style="text-align:left;">
longitude
</td>
<td style="text-align:left;">
Longitude
</td>
</tr>
<tr>
<td style="text-align:left;">
mass
</td>
<td style="text-align:left;">
Mass
</td>
</tr>
<tr>
<td style="text-align:left;">
massUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
organismQuantity
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
organismQuantityUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
organismSex
</td>
<td style="text-align:left;">
Organism sex
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteID
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteIdentification
</td>
<td style="text-align:left;">
Pathogen
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteLifeStage
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
primerCitation
</td>
<td style="text-align:left;">
Primer citation
</td>
</tr>
<tr>
<td style="text-align:left;">
probeCitation
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
probeTarget
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
probeType
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
reversePrimerSequence
</td>
<td style="text-align:left;">
Primer sequence
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleCollectionBodyPart
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleCollectionMethod
</td>
<td style="text-align:left;">
Collection method or tissue
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleID
</td>
<td style="text-align:left;">
Sample ID
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleMaterial
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
spatialUncertainty
</td>
<td style="text-align:left;">
Spatial uncertainty
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Detection comments
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Host species NCBI tax ID
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Detection target NCBI tax ID
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Health notes
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Pathogen NCBI tax ID
</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="convert-the-data">Convert the data<a class="anchor" aria-label="anchor" href="#convert-the-data"></a>
</h3>
<p>Be extremely careful when using this function.</p>
<p>While most of the aligned fields are a 1:1 match, the following
fields are not:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">wdds_to_pharos_map</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">wdds</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"forwardPrimerSequence"</span>, <span class="st">"liveCapture"</span>,<span class="st">"reversePrimerSequence"</span>, <span class="st">"sampleCollectionMethod"</span> <span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pharos</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
wdds
</th>
<th style="text-align:left;">
pharos
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ageUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
forwardPrimerSequence
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
geneTarget
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
lengthMeasurement
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
lengthUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
liveCapture
</td>
<td style="text-align:left;">
Dead or alive
</td>
</tr>
<tr>
<td style="text-align:left;">
massUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
organismQuantity
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
organismQuantityUnits
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteID
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
parasiteLifeStage
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
probeCitation
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
probeTarget
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
probeType
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
reversePrimerSequence
</td>
<td style="text-align:left;">
Primer sequence
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleCollectionBodyPart
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleCollectionMethod
</td>
<td style="text-align:left;">
Collection method or tissue
</td>
</tr>
<tr>
<td style="text-align:left;">
sampleMaterial
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>The <code>wdds_to_pharos</code> function takes some shortcuts to make
reconciling the fields easier. In general, WDDS is more granular than
Pharos but none of the multiple component fields are condensed to a
single field - e.g. the primer sequence fields are NOT combined Primer
sequence and the sample collection fields are not condensed to
Collection method or tissue. Certain fields are technically different
types but can be harmonized. For instance <code>liveCapture</code> is
mapped directly to <code>dead or alive</code> even though they are
different types. Another major difference is that in Pharos, units for
certain measures are fixed and the author of the data is told what they
are when data are created, while in WDDS they are part of the disease
data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">becker_pharos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wdds_to_pharos.html">wdds_to_pharos</a></span><span class="op">(</span>wdds_disease_data <span class="op">=</span> <span class="va">becker_data_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; `sampleCollectionMethod` does not map perfectly to `Collection method or tissue`. Please review those entries.</span></span>
<span><span class="co">#&gt; `liveCapture` does not map perfectly to `Dead or alive`. Please review those entries.</span></span>
<span></span>
<span><span class="co"># readr::write_csv(becker_pharos,file = "wdds_to_pharos_example.csv")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="upload-data-into-pharos">Upload data into Pharos<a class="anchor" aria-label="anchor" href="#upload-data-into-pharos"></a>
</h3>
<p>Uploading data to Pharos has to be done via the web portal. As Pharos
is still in beta testing, some features like password reset are clunky.
We strongly recommend using a password manager like <a href="https://bitwarden.com/" class="external-link">bitwarden</a> to store your
credentials.</p>
<ol style="list-style-type: decimal">
<li><p>Click on your username</p></li>
<li><p>Click New Project or select an existing project</p></li>
<li><p>Click create new dataset - below you can see the pre-determined
units for different measures <img src="../inst/img/create_new_dataset.png" alt="create new dataset"></p></li>
<li><p>Click add rows from CSV</p></li>
</ol>
<p>After adding the the rows, the data will be validated against the
PHAROS schema. Valid columns will be highlighted in a light green and
invalid columns in a light red.</p>
<div class="float">
<img src="../inst/img/uploaded_data_no_mods.png" alt="pharos upload"><div class="figcaption">pharos upload</div>
</div>
<p>If you click publish, a validation report will be generated an any
issues will be noted.</p>
<p><img src="../inst/img/invalid_dead_or_alive.png" alt="pharos validation report"> ## Improve data for upload</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># fix dead or alive</span></span>
<span><span class="va">becker_pharos_da</span> <span class="op">&lt;-</span> <span class="va">becker_pharos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>`Dead or alive` <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="cn">FALSE</span> <span class="op">~</span> <span class="st">"dead"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"alive"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## add in ncbi taxa ids because we like standardization :) </span></span>
<span></span>
<span><span class="va">host_taxa</span> <span class="op">&lt;-</span> <span class="fu">taxize</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/taxize/reference/get_uid.html" class="external-link">get_uid</a></span><span class="op">(</span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">`Host species`</span><span class="op">)</span></span>
<span><span class="co">#&gt; No ENTREZ API key provided</span></span>
<span><span class="co">#&gt;  Get one via taxize::use_entrez()</span></span>
<span><span class="co">#&gt; See https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">══</span>  2 queries  <span style="color: #0000BB;">═══════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon 'Desmodus rotundus'</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔  Found: </span> Desmodus+rotundus</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon 'Desmodus rotundus'</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔  Found: </span> Desmodus+rotundus</span></span>
<span><span class="co">#&gt; <span style="color: #B2B2B2;">══</span>  Results  <span style="color: #B2B2B2;">═════════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Total: <span style="color: #00BB00;">2</span> </span></span>
<span><span class="co">#&gt; • Found: <span style="color: #00BB00;">2</span> </span></span>
<span><span class="co">#&gt; • Not Found: <span style="color: #00BB00;">0</span></span></span>
<span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">`Host species NCBI tax ID`</span> <span class="op">&lt;-</span> <span class="va">host_taxa</span></span>
<span></span>
<span><span class="va">detection_target_taxa</span> <span class="op">&lt;-</span> <span class="fu">taxize</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/taxize/reference/get_uid.html" class="external-link">get_uid</a></span><span class="op">(</span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">`Detection target`</span><span class="op">)</span></span>
<span><span class="co">#&gt; No ENTREZ API key provided</span></span>
<span><span class="co">#&gt;  Get one via taxize::use_entrez()</span></span>
<span><span class="co">#&gt; See https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">══</span>  2 queries  <span style="color: #0000BB;">═══════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon 'Coronaviridae'</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔  Found: </span> Coronaviridae</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon 'Coronaviridae'</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔  Found: </span> Coronaviridae</span></span>
<span><span class="co">#&gt; <span style="color: #B2B2B2;">══</span>  Results  <span style="color: #B2B2B2;">═════════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Total: <span style="color: #00BB00;">2</span> </span></span>
<span><span class="co">#&gt; • Found: <span style="color: #00BB00;">2</span> </span></span>
<span><span class="co">#&gt; • Not Found: <span style="color: #00BB00;">0</span></span></span>
<span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">`Detection target NCBI tax ID`</span> <span class="op">&lt;-</span> <span class="va">detection_target_taxa</span></span>
<span></span>
<span><span class="va">pathogen_taxa</span> <span class="op">&lt;-</span> <span class="fu">taxize</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/taxize/reference/get_uid.html" class="external-link">get_uid</a></span><span class="op">(</span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">Pathogen</span><span class="op">)</span></span>
<span><span class="co">#&gt; No ENTREZ API key provided</span></span>
<span><span class="co">#&gt;  Get one via taxize::use_entrez()</span></span>
<span><span class="co">#&gt; See https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">══</span>  2 queries  <span style="color: #0000BB;">═══════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon 'Alphacoronavirus'</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔  Found: </span> Alphacoronavirus</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrieving data for taxon ''</span></span>
<span><span class="co">#&gt; Not found. Consider checking the spelling or alternate classification</span></span>
<span><span class="co">#&gt; <span style="color: #B2B2B2;">══</span>  Results  <span style="color: #B2B2B2;">═════════════════</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Total: <span style="color: #00BB00;">2</span> </span></span>
<span><span class="co">#&gt; • Found: <span style="color: #00BB00;">1</span> </span></span>
<span><span class="co">#&gt; • Not Found: <span style="color: #00BB00;">0</span></span></span>
<span><span class="va">becker_pharos_da</span><span class="op">$</span><span class="va">`Pathogen NCBI tax ID`</span> <span class="op">&lt;-</span> <span class="va">pathogen_taxa</span></span>
<span></span>
<span><span class="co">### write the csv</span></span>
<span></span>
<span><span class="co"># readr::write_csv(becker_pharos_da,file = "wdds_to_pharos_example_corrected.csv")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pharos-doesnt-like-nas">Pharos doesn’t like NA’s<a class="anchor" aria-label="anchor" href="#pharos-doesnt-like-nas"></a>
</h3>
<p>Pharos says that instead of using NA for items without values, we
should leave them blank.</p>
<div class="float">
<img src="../inst/img/need_blank_nas.png" alt="On no we need blanks not NA"><div class="figcaption">On no we need blanks not NA</div>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># use the built in function na_to_blank </span></span>
<span><span class="va">beck_pharos_drop_nas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/na_to_blank.html">na_to_blank</a></span><span class="op">(</span><span class="va">becker_pharos_da</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># readr::write_csv(beck_pharos_drop_nas,file = "wdds_to_pharos_example_final_final.csv")</span></span>
<span>  </span></code></pre></div>
<p>Get yourself a treat - you just created a dataset ready to be shared
on Pharos!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Collin Schwantes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
